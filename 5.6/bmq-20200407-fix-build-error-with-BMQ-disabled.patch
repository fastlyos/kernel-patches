commit 6b812875c4eac9956285b29e9aae1780badcfb13
Author: Oleksandr Natalenko <oleksandr@redhat.com>
Date:   Tue Apr 7 11:05:31 2020 +0200

    bmq-5.6: fix build error with BMQ disabled
    
    Signed-off-by: Oleksandr Natalenko <oleksandr@redhat.com>

diff --git a/kernel/sched/sched.h b/kernel/sched/sched.h
index 911b30506c833..2a2421a91b71f 100644
--- a/kernel/sched/sched.h
+++ b/kernel/sched/sched.h
@@ -2488,4 +2488,18 @@ static inline int task_running_nice(struct task_struct *p)
 {
 	return (task_nice(p) > 0);
 }
+
+#ifdef CONFIG_SMP
+static inline bool is_per_cpu_kthread(struct task_struct *p)
+{
+	if (!(p->flags & PF_KTHREAD))
+		return false;
+
+	if (p->nr_cpus_allowed != 1)
+		return false;
+
+	return true;
+}
+#endif
+
 #endif /* !CONFIG_SCHED_BMQ */
